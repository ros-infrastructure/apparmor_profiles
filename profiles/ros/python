# ------------------------------------------------------------------
#
#    Copyright (C) 2019 Open Source Robotics Foundation
#
#    This program is free software; you can redistribute it and/or
#    modify it under the terms of version 2 of the GNU General Public
#    License published by the Free Software Foundation.
#
# ------------------------------------------------------------------

# Include python abstractions and excutables needed for ros with python
#include <abstractions/python>

# CHECKME: Which are general for other languages?
/bin/dash mrix,
/bin/uname mrix,

# CHECKME: Is this already in abstractions somewhere?
@{PROC}/@{pid}/cgroup r,
@{PROC}/@{pid}/cmdline r,
@{PROC}/@{pid}/environ r,
@{PROC}/@{pid}/fd/ r,

# CHECKME: Could if `python{3,3.?*}` is too relaxed?
/usr/bin/python{3,3.?*} ix,
/usr/local/lib/python{3,3.?*}/dist-packages** mr,

# CHECKME: is `owner` really necessary for non-home paths?
owner @{ROS_INSTALL_PYTHON}/site-packages/** mr,
owner @{ROS_INSTALL_PYTHON}/site-packages/**/__pycache__/ w,
owner @{HOME}/.local/lib/python{3,3.?*}/site-packages/** mr,
owner @{HOME}/.local/lib/python{3,3.?*}/site-packages/**/__pycache__/ w,

# CHECKME: why are each of these needed?
/etc/apt/apt.conf.d/** r,
/etc/default/apport r,
/etc/nsswitch.conf r,
/etc/passwd r,
/usr/share/dpkg/cputable r,
/usr/share/dpkg/tupletable r,
